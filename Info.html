<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>App Inspección Comercial - TOTEM</title>

<style>

/* ================= VARIABLES ================= */

:root{
--bg:#e5e7eb;
--card:#ffffff;
--border:#d1d5db;
--text:#111827;
--muted:#6b7280;
--primary:#1e3a8a;
--primary-dark:#1e40af;
--radius:14px;
}

*{box-sizing:border-box;}

body{
margin:0;
font-family:system-ui;
background:var(--bg);
}

.container{
max-width:1200px;
margin:auto;
padding:20px;
}

.card{
background:var(--card);
padding:25px;
border-radius:20px;
margin-bottom:20px;
}

/* ================= HEADER ================= */

.top-tabs{
display:flex;
gap:10px;
margin-bottom:15px;
}

.tab-btn{
padding:8px 14px;
border-radius:10px;
border:1px solid var(--border);
background:white;
cursor:pointer;
}

.tab-btn.active{
background:var(--primary);
color:white;
}

.title{margin:5px 0;}
.subtitle{color:var(--muted);font-size:14px;}

/* ================= FORM ================= */

.section{
border:1px solid var(--border);
padding:20px;
border-radius:var(--radius);
background:#f9fafb;
margin-bottom:20px;
}

.section-title{
color:var(--primary);
margin-bottom:15px;
font-weight:600;
}

.grid-2{
display:grid;
grid-template-columns:1fr 1fr;
gap:15px;
}

.grid-3{
display:grid;
grid-template-columns:1fr 1fr 1fr;
gap:15px;
}

.form-group{
display:flex;
flex-direction:column;
gap:6px;
}

label{
font-size:13px;
color:var(--muted);
}

input,select,textarea{
padding:10px;
border-radius:10px;
border:1px solid var(--border);
font-size:14px;
}

textarea{min-height:80px;resize:vertical;}

input:focus,textarea:focus,select:focus{
border-color:var(--primary);
box-shadow:0 0 0 2px rgba(30,58,138,0.15);
outline:none;
}

.btn-primary{
background:var(--primary);
color:white;
padding:10px 18px;
border:none;
border-radius:10px;
cursor:pointer;
}

.btn-primary:hover{
background:var(--primary-dark);
}

.btn-secondary{
background:#e5e7eb;
padding:10px 18px;
border:none;
border-radius:10px;
cursor:pointer;
}

.form-actions{
display:flex;
justify-content:flex-end;
gap:10px;
}

/* ================= MODAL GUARDIAS ================= */

.modal{
display:none;
position:fixed;
inset:0;
background:rgba(0,0,0,0.5);
justify-content:center;
align-items:center;
z-index:1000;
}

.modal-content{
background:white;
width:95%;
max-width:1100px;
border-radius:20px;
padding:25px;
}

.table-guardias{
width:100%;
border-collapse:collapse;
margin-top:15px;
}

.table-guardias th,
.table-guardias td{
border:1px solid var(--border);
padding:8px;
text-align:center;
}

.table-guardias th{
background:var(--primary);
color:white;
}

.totales{
font-weight:bold;
background:#f3f4f6;
}

.modal-actions{
display:flex;
justify-content:space-between;
margin-top:20px;
}

.resumen{
margin-top:10px;
font-size:14px;
color:var(--muted);
}

.checkbox-grid{
display:grid;
grid-template-columns:repeat(2,1fr);
gap:8px;
}

@media(max-width:900px){
.grid-2,.grid-3{grid-template-columns:1fr;}
.checkbox-grid{grid-template-columns:1fr;}
}

</style>
</head>

<body>

<div class="container">

<div class="top-tabs">
<button class="tab-btn active">INFORMACIÓN</button>
<button class="tab-btn">LEVANTAMIENTO</button>
<button class="tab-btn">DISEÑO / PLANO</button>
</div>

<h1 class="title">INFORME INSPECCIÓN COMERCIAL</h1>
<p class="subtitle">Código: COM-F4.1.2.01</p>

<div class="card">

<!-- ================= INFORMACIÓN GENERAL ================= -->

<div class="section">
<h3 class="section-title">Información General</h3>
<div class="grid-2">
<div class="form-group">
<label>Nombre contacto de obra</label>
<input type="text">
</div>
<div class="form-group">
<label>Teléfono</label>
<input type="text">
</div>
<div class="form-group">
<label>Email</label>
<input type="text">
</div>
<div class="form-group">
<label>Dirección</label>
<input type="text">
</div>
<div class="form-group">
<label>Coordenadas (Lat / Long)</label>
<input type="text">
</div>
</div>
</div>

<!-- ================= REQUISITOS DEL CLIENTE ================= -->

<div class="section">
<h3 class="section-title">Requisitos del Cliente</h3>
<div class="form-group">
<label>Problema del Cliente</label>
<textarea></textarea>
</div>
<div class="form-group">
<label>Requisitos del Sistema</label>
<textarea></textarea>
</div>
<div class="form-group">
<label>Sistema de Grabación Actual</label>
<textarea></textarea>
</div>
</div>

<!-- ================= INTERNET ================= -->

<div class="section">
<h3 class="section-title">Proveedor de Internet</h3>
<div class="grid-3">
<div class="form-group">
<label>Proveedor</label>
<select>
<option>CNT</option>
<option>Claro</option>
<option>Telconet</option>
<option>Puntonet</option>
<option>Starlink</option>
<option>Otro</option>
</select>
</div>
<div class="form-group">
<label>Velocidad</label>
<input type="text" placeholder="100 Mbps">
</div>
<div class="form-group">
<label>Tipo IP</label>
<select>
<option>Dinámica</option>
<option>Fija</option>
</select>
</div>
</div>
</div>

<!-- ================= CONDICIONES EXTERNAS ================= -->

<div class="section">
<h3 class="section-title">Condiciones Externas a la Instalación</h3>
<div class="checkbox-grid">
<label><input type="checkbox"> Área techada</label>
<label><input type="checkbox"> Exposición lluvia</label>
<label><input type="checkbox"> Zona industrial</label>
<label><input type="checkbox"> Polvo</label>
<label><input type="checkbox"> Vibración</label>
<label><input type="checkbox"> Altura > 3m</label>
<label><input type="checkbox"> Requiere andamio</label>
<label><input type="checkbox"> Permiso especial</label>
</div>
</div>

<!-- ================= ESTIMACIÓN ================= -->

<div class="section">
<h3 class="section-title">Estimación del Tiempo de Instalación</h3>
<div class="grid-3">
<div class="form-group">
<label>Días</label>
<input type="number">
</div>
<div class="form-group">
<label>Técnicos</label>
<input type="number">
</div>
<div class="form-group">
<label>Horario</label>
<select>
<option>Diurno</option>
<option>Nocturno</option>
<option>24H</option>
</select>
</div>
</div>
</div>

<!-- ================= LOGÍSTICA ================= -->

<div class="section">
<h3 class="section-title">Logística y Costos Indirectos</h3>
<div class="checkbox-grid">
<label><input type="checkbox"> Transporte carga pesada</label>
<label><input type="checkbox"> Transporte equipos</label>
<label><input type="checkbox"> Transporte materiales</label>
<label><input type="checkbox"> Camioneta</label>
<label><input type="checkbox"> Alimentación</label>
<label><input type="checkbox"> Hospedaje</label>
<label><input type="checkbox"> Viáticos</label>
<label><input type="checkbox"> Movilización equipo técnico</label>
</div>
</div>

<!-- ================= CONTINGENCIA ================= -->

<div class="section">
<h3 class="section-title">Contingencia</h3>
<p>Incluir 1.5% del total PVP de equipos para posibles imprevistos.</p>
</div>

<!-- ================= GUARDIAS ================= -->

<div class="section">
<h3 class="section-title">Puestos de Guardias</h3>
<button class="btn-primary" id="btnGuardias">+ Abrir Cuadro de Guardias</button>
<div id="resumenGuardias" class="resumen">No registrados</div>
</div>

</div>
</div>

<!-- ================= MODAL GUARDIAS ================= -->

<div class="modal" id="modalGuardias">
<div class="modal-content">

<h3>PUESTOS DE GUARDIAS</h3>

<table class="table-guardias" id="tablaGuardias">
<thead>
<tr>
<th>Ubicación</th>
<th>24H</th>
<th>12H</th>
<th>Turno</th>
<th>Observación</th>
<th>Fotos</th>
<th>Eliminar</th>
</tr>
</thead>
<tbody></tbody>
<tfoot>
<tr class="totales">
<td>Totales</td>
<td id="total24">0</td>
<td id="total12">0</td>
<td id="totalTurno">0</td>
<td colspan="3"></td>
</tr>
</tfoot>
</table>

<button class="btn-secondary" id="agregarFila">+ Nueva Fila</button>

<div class="modal-actions">
<button class="btn-secondary" id="cerrarModal">Cerrar</button>
<button class="btn-primary" id="guardarGuardias">Guardar</button>
</div>

</div>
</div>

<script>

let listaGuardias=[];
const modal=document.getElementById("modalGuardias");
const tbody=document.querySelector("#tablaGuardias tbody");

document.getElementById("btnGuardias").onclick=()=>modal.style.display="flex";
document.getElementById("cerrarModal").onclick=()=>modal.style.display="none";

document.getElementById("agregarFila").onclick=()=>{
const fila=document.createElement("tr");
fila.innerHTML=`
<td><input type="text" class="ubicacion"></td>
<td><input type="number" class="h24" value="0"></td>
<td><input type="number" class="h12" value="0"></td>
<td><input type="number" class="turno" value="0"></td>
<td><input type="text" class="obs"></td>
<td><input type="file" multiple></td>
<td><button onclick="eliminarFila(this)">X</button></td>
`;
tbody.appendChild(fila);
};

function eliminarFila(btn){
btn.closest("tr").remove();
calcularTotales();
}

document.addEventListener("input",e=>{
if(e.target.classList.contains("h24")||
e.target.classList.contains("h12")||
e.target.classList.contains("turno")){
calcularTotales();
}
});

function calcularTotales(){
let t24=0,t12=0,tTurno=0;
document.querySelectorAll(".h24").forEach(el=>t24+=Number(el.value));
document.querySelectorAll(".h12").forEach(el=>t12+=Number(el.value));
document.querySelectorAll(".turno").forEach(el=>tTurno+=Number(el.value));
document.getElementById("total24").innerText=t24;
document.getElementById("total12").innerText=t12;
document.getElementById("totalTurno").innerText=tTurno;
}

document.getElementById("guardarGuardias").onclick=()=>{
listaGuardias=[];
document.querySelectorAll("#tablaGuardias tbody tr").forEach(tr=>{
listaGuardias.push({
ubicacion:tr.querySelector(".ubicacion").value,
h24:tr.querySelector(".h24").value,
h12:tr.querySelector(".h12").value,
turno:tr.querySelector(".turno").value,
obs:tr.querySelector(".obs").value
});
});
localStorage.setItem("puestosGuardias",JSON.stringify(listaGuardias));
document.getElementById("resumenGuardias").innerText=
`Registrados ${listaGuardias.length} puestos`;
modal.style.display="none";
};

</script>

</body>
</html>